{"ast":null,"code":"import _objectSpread from\"/Users/chef/Downloads/recipe-mvp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// IngredientRow.js\nimport React,{useEffect,useState}from\"react\";import{useNavigate,useLocation}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const IngredientRow=_ref=>{let{ingredient,index,updateIngredient,removeIngredient,unitOptions,categoryOptions,subcategoryOptions,ingredientOptions}=_ref;const[localIngredient,setLocalIngredient]=useState(ingredient||{});const navigate=useNavigate();const location=useLocation();const returnTo=new URLSearchParams(location.search).get(\"title\")||\"MainRecipe\";useEffect(()=>{setLocalIngredient(ingredient||{});},[ingredient]);const handleChange=(field,value)=>{const updated=_objectSpread(_objectSpread({},localIngredient),{},{[field]:value});if(field===\"category\"){updated.subcategory=\"\";}setLocalIngredient(updated);updateIngredient(index,updated);};const handleSubrecipeRedirect=()=>{var _localIngredient$ingr;const name=(_localIngredient$ingr=localIngredient.ingredient)===null||_localIngredient$ingr===void 0?void 0:_localIngredient$ingr.trim();if(localIngredient.isSubrecipe&&name){const params=new URLSearchParams({title:name,returnTo});navigate(\"/recipe?\".concat(params.toString()));}};const qty=parseFloat(localIngredient.qty)||0;const cost=parseFloat(localIngredient.cost)||0;const lineCost=(qty*cost).toFixed(2);const filteredIngredients=ingredientOptions.filter(item=>item.category===localIngredient.category&&item.subcategory===localIngredient.subcategory);return/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-[60px_80px_160px_160px_160px_160px_80px_100px_40px] gap-2 items-center text-sm border-b py-2\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"px-2 py-1 border rounded\",placeholder:\"Qty\",value:localIngredient.qty,onChange:e=>handleChange(\"qty\",e.target.value)}),/*#__PURE__*/_jsxs(\"select\",{className:\"px-2 py-1 border rounded bg-white text-sm\",value:localIngredient.unit,onChange:e=>handleChange(\"unit\",e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Unit\"}),unitOptions.map(unit=>/*#__PURE__*/_jsx(\"option\",{value:unit,children:unit},unit))]}),/*#__PURE__*/_jsxs(\"select\",{className:\"px-2 py-1 border rounded bg-white text-sm\",value:localIngredient.category,onChange:e=>handleChange(\"category\",e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Category\"}),categoryOptions.map(cat=>/*#__PURE__*/_jsx(\"option\",{value:cat,children:cat},cat))]}),/*#__PURE__*/_jsxs(\"select\",{className:\"px-2 py-1 border rounded bg-white text-sm\",value:localIngredient.subcategory,onChange:e=>handleChange(\"subcategory\",e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Subcategory\"}),(subcategoryOptions[localIngredient.category]||[]).map(sub=>/*#__PURE__*/_jsx(\"option\",{value:sub,children:sub},sub))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"w-full px-2 py-1 border rounded\",placeholder:\"Ingredient\",value:localIngredient.ingredient,list:\"ingredient-options-\".concat(index),onChange:e=>handleChange(\"ingredient\",e.target.value),onBlur:handleSubrecipeRedirect}),/*#__PURE__*/_jsx(\"datalist\",{id:\"ingredient-options-\".concat(index),children:filteredIngredients.map(item=>/*#__PURE__*/_jsx(\"option\",{value:item.name},item.name))})]}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 py-1 border rounded\",placeholder:\"Modifier\",value:localIngredient.modifier,onChange:e=>handleChange(\"modifier\",e.target.value)}),/*#__PURE__*/_jsx(\"input\",{className:\"px-2 py-1 border rounded text-right\",placeholder:\"Cost\",value:localIngredient.cost,onChange:e=>handleChange(\"cost\",e.target.value)}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-right text-gray-800\",children:[\"$\",lineCost]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:localIngredient.isSubrecipe||false,onChange:e=>handleChange(\"isSubrecipe\",e.target.checked)}),/*#__PURE__*/_jsx(\"button\",{className:\"text-red-500 hover:text-red-700 text-xs\",onClick:()=>removeIngredient(index),children:\"\\u2715\"})]})]});};export default IngredientRow;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useLocation","jsx","_jsx","jsxs","_jsxs","IngredientRow","_ref","ingredient","index","updateIngredient","removeIngredient","unitOptions","categoryOptions","subcategoryOptions","ingredientOptions","localIngredient","setLocalIngredient","navigate","location","returnTo","URLSearchParams","search","get","handleChange","field","value","updated","_objectSpread","subcategory","handleSubrecipeRedirect","_localIngredient$ingr","name","trim","isSubrecipe","params","title","concat","toString","qty","parseFloat","cost","lineCost","toFixed","filteredIngredients","filter","item","category","className","children","placeholder","onChange","e","target","unit","map","cat","sub","list","onBlur","id","modifier","type","checked","onClick"],"sources":["/Users/chef/Downloads/recipe-mvp/src/IngredientRow.js"],"sourcesContent":["// IngredientRow.js\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useLocation } from \"react-router-dom\";\n\nconst IngredientRow = ({\n  ingredient,\n  index,\n  updateIngredient,\n  removeIngredient,\n  unitOptions,\n  categoryOptions,\n  subcategoryOptions,\n  ingredientOptions\n}) => {\n  const [localIngredient, setLocalIngredient] = useState(ingredient || {});\n  const navigate = useNavigate();\n  const location = useLocation();\n  const returnTo = new URLSearchParams(location.search).get(\"title\") || \"MainRecipe\";\n\n  useEffect(() => {\n    setLocalIngredient(ingredient || {});\n  }, [ingredient]);\n\n  const handleChange = (field, value) => {\n    const updated = { ...localIngredient, [field]: value };\n    if (field === \"category\") {\n      updated.subcategory = \"\";\n    }\n    setLocalIngredient(updated);\n    updateIngredient(index, updated);\n  };\n\n  const handleSubrecipeRedirect = () => {\n    const name = localIngredient.ingredient?.trim();\n    if (localIngredient.isSubrecipe && name) {\n      const params = new URLSearchParams({ title: name, returnTo });\n      navigate(`/recipe?${params.toString()}`);\n    }\n  };\n\n  const qty = parseFloat(localIngredient.qty) || 0;\n  const cost = parseFloat(localIngredient.cost) || 0;\n  const lineCost = (qty * cost).toFixed(2);\n\n  const filteredIngredients = ingredientOptions.filter(\n    (item) =>\n      item.category === localIngredient.category &&\n      item.subcategory === localIngredient.subcategory\n  );\n\n  return (\n    <div className=\"grid grid-cols-[60px_80px_160px_160px_160px_160px_80px_100px_40px] gap-2 items-center text-sm border-b py-2\">\n      <input\n        className=\"px-2 py-1 border rounded\"\n        placeholder=\"Qty\"\n        value={localIngredient.qty}\n        onChange={(e) => handleChange(\"qty\", e.target.value)}\n      />\n\n      <select\n        className=\"px-2 py-1 border rounded bg-white text-sm\"\n        value={localIngredient.unit}\n        onChange={(e) => handleChange(\"unit\", e.target.value)}\n      >\n        <option value=\"\">Unit</option>\n        {unitOptions.map((unit) => (\n          <option key={unit} value={unit}>{unit}</option>\n        ))}\n      </select>\n\n      <select\n        className=\"px-2 py-1 border rounded bg-white text-sm\"\n        value={localIngredient.category}\n        onChange={(e) => handleChange(\"category\", e.target.value)}\n      >\n        <option value=\"\">Category</option>\n        {categoryOptions.map((cat) => (\n          <option key={cat} value={cat}>{cat}</option>\n        ))}\n      </select>\n\n      <select\n        className=\"px-2 py-1 border rounded bg-white text-sm\"\n        value={localIngredient.subcategory}\n        onChange={(e) => handleChange(\"subcategory\", e.target.value)}\n      >\n        <option value=\"\">Subcategory</option>\n        {(subcategoryOptions[localIngredient.category] || []).map((sub) => (\n          <option key={sub} value={sub}>{sub}</option>\n        ))}\n      </select>\n\n      <div className=\"relative\">\n        <input\n          className=\"w-full px-2 py-1 border rounded\"\n          placeholder=\"Ingredient\"\n          value={localIngredient.ingredient}\n          list={`ingredient-options-${index}`}\n          onChange={(e) => handleChange(\"ingredient\", e.target.value)}\n          onBlur={handleSubrecipeRedirect}\n        />\n        <datalist id={`ingredient-options-${index}`}>\n          {filteredIngredients.map((item) => (\n            <option key={item.name} value={item.name} />\n          ))}\n        </datalist>\n      </div>\n\n      <input\n        className=\"px-2 py-1 border rounded\"\n        placeholder=\"Modifier\"\n        value={localIngredient.modifier}\n        onChange={(e) => handleChange(\"modifier\", e.target.value)}\n      />\n\n      <input\n        className=\"px-2 py-1 border rounded text-right\"\n        placeholder=\"Cost\"\n        value={localIngredient.cost}\n        onChange={(e) => handleChange(\"cost\", e.target.value)}\n      />\n\n      <div className=\"text-right text-gray-800\">${lineCost}</div>\n\n      <div className=\"flex items-center space-x-1\">\n        <input\n          type=\"checkbox\"\n          checked={localIngredient.isSubrecipe || false}\n          onChange={(e) => handleChange(\"isSubrecipe\", e.target.checked)}\n        />\n        <button\n          className=\"text-red-500 hover:text-red-700 text-xs\"\n          onClick={() => removeIngredient(index)}\n        >\n          âœ•\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default IngredientRow;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}